<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>외워</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
  <main class="container">
    <h1 class="app-title">영어 단어</h1>

    <!-- 학습자 이름/랭킹 -->
    <section class="card">
      <label class="label">학습자 이름</label>
      <input id="player-name" class="input" placeholder="이름을 입력하세요 (랭킹/기록용)" />
    </section>

    <section class="card">
      <div class="card-header">
        <h2><i class="fa-solid fa-trophy"></i> 학습 랭킹</h2>
        <button id="ranking-reset-btn" class="btn btn-danger btn-xs">
          <i class="fa-solid fa-trash"></i> 랭킹 초기화
        </button>
      </div>
      <div id="no-ranking-list" class="muted"></div>
      <div id="ranking-list" class="ranking-list"></div>
    </section>

    <!-- 단어장 목록 -->
    <section class="card">
      <h2>단어장 목록</h2>
      <p class="muted">학습할 단어장을 선택하세요. (1개 이상)</p>

      <div id="quiz-list" class="quiz-list"></div>
      <p id="no-quiz-list" class="muted">저장된 단어장이 없습니다.</p>

      <div class="actions">
        <button id="start-learn-btn" class="btn" disabled>
          <i class="fa-solid fa-book-open"></i> 학습
        </button>
        <button id="start-quiz-btn" class="btn" disabled>
          <i class="fa-solid fa-pen"></i> 퀴즈
        </button>
        <button id="start-random-quiz-btn" class="btn" disabled>
          <i class="fa-solid fa-shuffle"></i> 랜덤(10)
        </button>
      </div>
      <div id="selection-message" class="muted"></div>
    </section>

    <!-- 오답노트 -->
    <section class="accordion">
      <button id="accordion-header-ondap" class="accordion-header">오답노트</button>
      <div id="accordion-content-ondap" class="accordion-content">
        <button id="start-wrong-quiz-btn" class="btn" disabled>
          <i class="fa-solid fa-redo"></i> 틀린 문제 (0개) 다시 풀기
        </button>
        <p id="wrong-quiz-message" class="muted"></p>
      </div>
    </section>

    <!-- 새 단어장 만들기 (AI/수동) -->
    <section class="accordion">
      <button id="accordion-header-new-quiz" class="accordion-header">새 단어장 직접 만들기 (AI)</button>
      <div id="accordion-content-new-quiz" class="accordion-content">
        <div class="grid">
          <div>
            <h3>OCR → 자동 추가</h3>
            <input id="ocr-image-input" type="file" accept="image/*" />
            <button id="ocr-extract-btn" class="btn">이미지에서 단어 추출</button>
            <div id="ocr-message" class="ai-message"></div>

            <div class="mt-2">
              <input id="new-word-auto" class="input" placeholder="영어 단어" />
              <button id="add-word-auto-btn" class="btn">자동 추가</button>
              <span id="auto-add-loader" class="loader" style="display:none;"></span>
              <div id="auto-add-message" class="ai-message"></div>
            </div>
          </div>

          <div>
            <h3>수동 추가</h3>
            <input id="new-word-manual" class="input" placeholder="영어 단어" />
            <input id="new-meaning-manual" class="input" placeholder="한국어 의미" />
            <input id="new-phonetic-manual" class="input" placeholder="발음 기호(선택)" />
            <button id="add-word-manual-btn" class="btn">이 단어 추가</button>
            <div id="manual-add-message" class="muted h-4"></div>
          </div>
        </div>

        <h3 class="mt-2">현재 단어 목록 (<span id="temp-word-count">0</span>)</h3>
        <div id="temp-word-list" class="list"></div>

        <div class="mt-2">
          <input id="new-quiz-name" class="input" placeholder="단어장 이름" />
          <button id="save-new-quiz-btn" class="btn btn-primary">단어장 저장</button>
        </div>
      </div>
    </section>

    <!-- 전체 학습 기록 -->
    <section class="accordion">
      <button id="accordion-header-history" class="accordion-header">전체 학습 기록</button>
      <div id="accordion-content-history" class="accordion-content">
        <div class="history-actions">
          <button id="clear-history-btn" class="btn btn-danger btn-xs">기록 모두 지우기</button>
        </div>
        <div id="history-list" class="history-list"></div>
        <div id="no-history-list" class="muted">학습 기록이 없습니다.</div>
      </div>
    </section>
  </main>

  <!-- 퀴즈 화면 -->
  <section id="quiz-container" class="overlay hidden">
    <div class="quiz">
      <div class="quiz-header">
        <button id="home-btn" class="btn btn-xs">&larr; 홈</button>
        <h2 id="quiz-title"></h2>
        <button id="quit-btn" class="btn btn-danger btn-xs">그만하기</button>
      </div>

      <div id="quiz-content">
        <div id="progress" class="muted"></div>
        <h3 id="question" class="question"></h3>
        <div id="options" class="options"></div>
        <p id="rationale" class="rationale"></p>

        <div class="nav">
          <button id="quiz-prev-arrow" class="btn btn-xs" disabled>&larr; 이전</button>
          <button id="quiz-next-arrow" class="btn btn-xs" disabled>다음 &rarr;</button>
        </div>
      </div>

      <div id="result" class="hidden">
        <h3 id="score-display"></h3>
        <div id="wrong-answers-list"></div>
        <div class="nav">
          <button id="retry-btn" class="btn">같은 문제 다시 풀기</button>
          <button id="back-to-main-btn" class="btn">메인으로</button>
        </div>
      </div>
    </div>
  </section>

  <!-- 플래시카드 -->
  <section id="flashcard-container" class="overlay hidden">
    <div class="flashcard-wrap">
      <div class="fc-header">
        <button id="main-from-summary-btn" class="btn btn-xs">&larr; 홈</button>
        <h2 id="flashcard-title"></h2>
        <button id="exit-study-btn" class="btn btn-xs">요약 보기</button>
      </div>

      <div id="flashcard-scene" class="flashcard-scene">
        <div id="flashcard" class="flashcard">
          <div id="flashcard-front" class="flashcard-face front"></div>
          <div id="flashcard-back" class="flashcard-face back"></div>
        </div>
      </div>

      <div class="nav">
        <button id="card-prev-arrow" class="btn btn-xs" disabled>&larr; 이전</button>
        <span id="flashcard-progress" class="muted"></span>
        <button id="card-next-arrow" class="btn btn-xs" disabled>다음 &rarr;</button>
      </div>
    </div>
  </section>
<!-- 학습 요약 영역 (study-complete-container) 안에 넣기 -->
<div id="study-complete-container" class="hidden">
  <h3 class="section-title">학습 요약</h3>
  <ul id="study-summary-list"></ul>

  <div class="btn-row">
    <button id="start-quiz-from-summary-btn" class="btn">요약으로 퀴즈 시작</button>
    <!-- 이 id 가 반드시 아래와 같아야 합니다 -->
    <button id="main-from-summary-btn" class="btn btn-secondary">메인으로</button>
  </div>
</div>

  <!-- 학습 요약 -->
  <section id="study-complete-container" class="overlay hidden">
    <div class="card">
      <h2>학습 요약</h2>
      <ul id="study-summary-list" class="list"></ul>
      <div class="actions">
        <button id="start-quiz-from-summary-btn" class="btn">이 단어로 퀴즈</button>
        <button id="main-from-summary-btn2" class="btn">메인으로</button>
      </div>
    </div>
  </section>

  <!-- 편집 모달 -->
  <div id="edit-modal-backdrop" class="modal-backdrop hidden"></div>
  <div id="edit-modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-header">
      <h3 id="edit-modal-title">"단어장" 단어장 편집</h3>
      <button id="edit-modal-close-btn" class="icon-btn" aria-label="닫기"><i class="fa-solid fa-xmark"></i></button>
    </div>

    <div class="modal-body">
      <label class="label">단어장 이름</label>
      <input id="edit-quiz-name" class="input" />

      <h4>단어 목록 (<span id="edit-word-count">0</span>)</h4>
      <div id="edit-word-list" class="list"></div>

      <h4>새 단어 추가 (수동)</h4>
      <input id="edit-new-word" class="input" placeholder="영어 단어" />
      <input id="edit-new-meaning" class="input" placeholder="한국어 의미" />
      <input id="edit-new-phonetic" class="input" placeholder="발음 기호(선택)" />
      <button id="edit-add-word-btn" class="btn"><i class="fa-solid fa-plus"></i> 이 단어 추가</button>
      <div id="edit-manual-add-message" class="muted h-4"></div>
    </div>

    <div class="modal-footer">
      <button id="edit-modal-save-btn" class="btn btn-primary">저장</button>
      <button id="edit-modal-cancel-btn" class="btn">취소</button>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
